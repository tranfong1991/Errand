<!DOCTYPE html>
<html lang="en" ng-app="ErrandApp" >
  <head>
    <% include ../partials/head %>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/creative.css" type="text/css">  
  </head>
  <body ng-controller="errandController">
    <!-- navbar -->
    <% include ../partials/navbar %>

    <!-- header -->
    <% include ../partials/header %>

    <% include ../partials/create-modal %>

    <script>
      var currentLocation =  <%- JSON.stringify(location) %>;
      var result = <%- JSON.stringify(response) %>;
    </script>
    
    <section id="trending">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 text-center">
            <h2 class="section-heading">Errands near {{ currentLocation.city + ', ' + currentLocation.region + ', ' + currentLocation.countryCode }}</h2>
            <hr class="primary">
          </div>

          <!-- Populate multiple errand template by using ng-repeat -->
	  <div class="row">
              <!-- Custom errand template using custom angular directive -->
              <errand info="errand" ng-repeat="errand in errands" ng-click="getErrandInfo(errand._id)"></errand>
	  </div>

          <!-- Pagination -->
         <div class="row text-center">
            <div class="col-lg-12">
              <pagination
                 total-items="totalItems"
                 ng-model="currentPage"
                 ng-change="pageChanged()"
                 max-size="maxSize"
                 items-per-page="itemsPerPage"
                 boundary-links="true"
		 previous-text="Prev">
              </pagination>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- contact -->
    <% include ../partials/contact %>

    <!-- footer -->
    <% include ../partials/footer %>

    <!-- errand modal  -->
    <% include ../partials/errand-modal  %>

    <!-- scripts -->
    <% include ../partials/foot%>
    
    <!-- Google Places API  -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2hdyDaASuFFv-wQUhnDZIA9TPK6UIiaM&libraries=places"></script>

    <!-- Modules -->
    <script type="text/javascript" src="js/app.js"></script>

    <!-- Controllers -->
    <script type="text/javascript" src="js/controllers/errand-controller.js"></script>

    <!-- Directives -->
    <script type="text/javascript" src="js/directives/errand-directive.js"></script>
    <script type="text/javascript" src="js/directives/google-places-directive.js"></script>  
    
    <!-- Services -->
    <script type="text/javascript" src="js/services/errand-service.js"></script>
    <script type="text/javascript" src="js/services/user-service.js"></script>
    <script type="text/javascript" src="js/services/auth-service.js"></script>

    <!-- Filters -->
    <script type="text/javascript" src="js/filters.js"></script>

  </body>
</html>
